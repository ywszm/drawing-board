!function(e){function t(t){for(var o,l,c=t[0],u=t[1],i=t[2],d=0,v=[];d<c.length;d++)l=c[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&v.push(r[l][0]),r[l]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);for(s&&s(t);v.length;)v.shift()();return a.push.apply(a,i||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,c=1;c<n.length;c++){var u=n[c];0!==r[u]&&(o=!1)}o&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},r={0:0},a=[];function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/drawing-board/web/";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var s=u;a.push([21,1]),n()}({19:function(e,t,n){"use strict";n(6)},20:function(e,t,n){"use strict";n(7)},21:function(e,t,n){"use strict";n.r(t);n(14);var o=n(9),r=(n(15),n(5)),a=(n(16),n(10)),l=(n(17),n(11)),c=(n(18),n(4)),u=n(13),i=n(1);var s=n(2),d=n(12);var v=Object(i.F)("data-v-cfaa1b94");Object(i.s)("data-v-cfaa1b94");var f={class:"setting-dropdown"},p={class:"control-item"},h=Object(i.k)("span",null,"线宽：",-1),b={class:"control-item"},m=Object(i.k)("span",null,"颜色：",-1),k={class:"control-item"},O=Object(i.k)("span",null,"撤销：",-1),j={class:"control-item"},y=Object(i.k)("span",null,"清除：",-1),w={class:"control-item"},g=Object(i.k)("span",null,"下载：",-1),C={class:"control-item"},x=Object(i.k)("span",null,"播放：",-1);Object(i.r)();var P=v((function(e,t){var n=Object(i.v)("AButton"),o=Object(i.v)("AInput"),r=Object(i.v)("AColorPicker"),a=Object(i.v)("AIcon"),l=Object(i.v)("APopper");return Object(i.q)(),Object(i.g)(i.c,null,[Object(i.k)(n,{ref:"reference",class:"setting-button","left-icon":"setting",onClick:t[1]||(t[1]=function(t){return e.handleClick(t)})},null,512),Object(i.k)(l,{value:e.showPopper,reference:e.reference},{default:v((function(){return[Object(i.k)("div",f,[Object(i.k)("div",p,[h,Object(i.k)(o,{style:{width:"120px"},type:"number",modelValue:e.lineWidth,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.$emit("update:lineWidth",t)})},null,8,["modelValue"])]),Object(i.k)("div",b,[m,Object(i.k)(r,{style:{width:"120px"},modelValue:e.strokeColor,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.$emit("update:strokeColor",t)})},null,8,["modelValue"])]),Object(i.k)("div",k,[O,Object(i.k)(a,{name:"revoke",class:"ui-icon",onClick:t[4]||(t[4]=function(t){return e.$emit("revoke")})})]),Object(i.k)("div",j,[y,Object(i.k)(a,{name:"clear",class:"ui-icon",onClick:t[5]||(t[5]=function(t){return e.$emit("clear")})})]),Object(i.k)("div",w,[g,Object(i.k)(a,{name:"download",class:"ui-icon",onClick:t[6]||(t[6]=function(t){return e.$emit("download")})})]),Object(i.k)("div",C,[x,Object(i.k)(a,{name:"play",class:"ui-icon",onClick:t[7]||(t[7]=function(t){return e.$emit("play")})})])])]})),_:1},8,["value","reference"])],64)})),T={props:{lineWidth:{type:String,default:"10"},strokeColor:{type:String,default:"rgba(0,0,0,0.6)"}},emits:["update:lineWidth","update:strokeColor","revoke","clear","download","play"],setup:function(){var e=Object(s.h)(null),t=Object(s.h)(!1),n=function(n){e.value.$el.contains(n.target)||(t.value=!1)};return{showPopper:t,reference:e,handleClick:function(){t.value=!t.value,setTimeout((function(){document.addEventListener("click",n,{once:!0})}))}}}};n(19);T.render=P,T.__scopeId="data-v-cfaa1b94";var W={components:{Sidebar:T},setup:function(){var e=Object(s.h)(null),t=function(e){var t=function(){e.value.width=document.documentElement.clientWidth,e.value.height=document.documentElement.clientHeight},n={},o=function(){n.clearRect(0,0,e.value.width,e.value.height)};Object(i.o)((function(){n=e.value.getContext("2d"),Object(i.n)((function(){n.lineJoin="round",n.lineCap="round"})),t(),window.onresize=t}));var r=!1,a=Object(s.h)("10"),l=Object(s.h)("rgba(0,0,0,0.6)"),c=[],u=[],v=function(){o(),u.forEach((function(e){e.forEach((function(t,o,r){if(0===o)n.lineWidth=t.width,n.strokeStyle=t.color;else if(1===o)n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(t.x,t.y);else{var a=r[o-1].x,l=r[o-1].y,c=a/2+t.x/2,u=l/2+t.y/2;n.quadraticCurveTo(a,l,c,u)}o===e.length-1&&(n.lineTo(t.x,t.y),n.stroke())}))}))},f=Object(d.a)((function(e){var t=e.clientX,n=e.clientY;m(c,t,n)&&(c.push({x:t,y:n}),v())}),8),p=function t(){r=!1,c=[],e.value.removeEventListener("mousemove",f),e.value.removeEventListener("mouseup",t)},h=Object(d.a)((function(e){e.preventDefault();var t=e.touches[0].clientX,n=e.touches[0].clientY;m(c,t,n)&&(c.push({x:t,y:n}),v())}),8),b=function t(n){n.preventDefault(),r=!1,c=[],e.value.removeEventListener("touchmove",h),e.value.removeEventListener("touchend",t)};return{lineWidth:a,strokeColor:l,handleMousedown:function(t){r=!0;var n=t.clientX,o=t.clientY;c.push({width:a.value,color:l.value}),c.push({x:n,y:o}),u.push(c),v(),e.value.addEventListener("mousemove",f,{passive:!0}),e.value.addEventListener("mouseup",p)},handleTouchstart:function(t){t.preventDefault(),r=!0;var n=t.touches[0].clientX,o=t.touches[0].clientY;c.push({width:a.value,color:l.value}),c.push({x:n,y:o}),u.push(c),v(),e.value.addEventListener("touchmove",h),e.value.addEventListener("touchend",b)},revoke:function(){u.pop(),v()},clear:function(){u.splice(0),o()},downloadPng:function(){var t=document.createElement("a");t.href=e.value.toDataURL("image/png"),window.navigator.userAgent.toLowerCase().match(/iphone|android|ipad/)?t.target="_blank":t.download="图片",t.click()},play:function(){var e=u.flat(),t=e.length,a=0;t&&requestAnimationFrame((function l(){a+=1,o();for(var c=0;c<a;c++){var u=e[c];if(u.width)console.log(u.style),n.lineWidth=u.width,n.strokeStyle=u.color;else{var i=e[c-1],s=e[c+1];if(i.width)n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(u.x,u.y);else{var d=i.x,f=i.y,p=d/2+u.x/2,h=f/2+u.y/2;n.quadraticCurveTo(d,f,p,h)}(c===a-1||s.width)&&(n.lineTo(u.x,u.y),n.stroke())}}if(r)return v();a<t&&requestAnimationFrame(l)}))}};function m(e,t,n){var o=e[e.length-1].x,r=e[e.length-1].y;return Math.abs(t-o)>=8||Math.abs(n-r)>=8}}(e);return{lineWidth:t.lineWidth,strokeColor:t.strokeColor,myCanvasRef:e,handleMousedown:t.handleMousedown,handleTouchstart:t.handleTouchstart,revoke:t.revoke,clear:t.clear,downloadPng:t.downloadPng,play:t.play}}};n(20);W.render=function(e,t){var n=Object(i.v)("Sidebar");return Object(i.q)(),Object(i.g)(i.c,null,[Object(i.k)("canvas",{id:"myCanvas",ref:"myCanvasRef",onMousedown:t[1]||(t[1]=function(t){return e.handleMousedown(t)}),onTouchstart:t[2]||(t[2]=function(t){return e.handleTouchstart(t)})},null,544),Object(i.k)(n,{lineWidth:e.lineWidth,"onUpdate:lineWidth":t[3]||(t[3]=function(t){return e.lineWidth=t}),strokeColor:e.strokeColor,"onUpdate:strokeColor":t[4]||(t[4]=function(t){return e.strokeColor=t}),onRevoke:t[5]||(t[5]=function(t){return e.revoke(t)}),onClear:t[6]||(t[6]=function(t){return e.clear(t)}),onPlay:t[7]||(t[7]=function(t){return e.play(t)}),onDownload:t[8]||(t[8]=function(t){return e.downloadPng(t)})},null,8,["lineWidth","strokeColor"])],64)};var E=W,L=Object(u.b)(E);L.component(c.a.name,c.a),L.component(l.a.name,l.a),L.component(a.a.name,a.a),L.component(r.a.name,r.a),L.component(o.a.name,o.a),L.mount("#app")},6:function(e,t,n){},7:function(e,t,n){}});